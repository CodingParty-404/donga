<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Road</title>
</head>
<body>

<form id="ex">
    <input type="text" id="sample5_address" placeholder="주소">
    <input type="button" onclick="sample5_execDaumPostcode()" value="주소 검색"><br>
    <div id="map" style="width:300px;height:300px;margin-top:10px;display:none"></div>



    <div class="row margin">
        <div class="input-field col s12">
          <!-- <i class="mdi-action-lock-outline prefix"></i> -->
          <i class="material-icons prefix">airport_shuttle</i>
          <input type="text" id="sample5_address" name="city" placeholder="선호하는 여행지 고르세요">

          <select name="city" id="city">
            <option value="제주" selected>선택</option>
            <option value="서울">서울</option>
            <option value="인천">인천</option>
            <option value="부산">부산</option>  
            <option value="제주">제주</option>
            <!-- seleected 속성을 기재하면 default로 된다. -->
            <option value="춘천">춘천</option>
            <option value="동해">동해</option>
          </select>
        </div>
      </div>





      
    </form>
      














    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="http://dmaps.daum.net/map_js_init/postcode.v2.js"></script>
    <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a311ddbe5e44bc2eb860a0749f6119fa&libraries=services"></script>
    <script>

    var form = $("#ex");

    $("#city").change(function(e){    

        var city = $(this).val();
        console.log(city);

        form.find("input[name='city']").val(city);
        

    });











    var mapContainer = document.getElementById('map'), // 지도를 표시할 div
    mapOption = {
        center: new daum.maps.LatLng(37.537187, 127.005476), // 지도의 중심좌표
        level: 5 // 지도의 확대 레벨
    };

    //지도를 미리 생성
    var map = new daum.maps.Map(mapContainer, mapOption);
    //주소-좌표 변환 객체를 생성
    var geocoder = new daum.maps.services.Geocoder();
    //마커를 미리 생성
    var marker = new daum.maps.Marker({ 
        position: new daum.maps.LatLng(37.537187, 127.005476), 
        map: map });


    function sample5_execDaumPostcode() { 
        new daum.Postcode({ oncomplete: function(data) {
        // 각 주소의 노출 규칙에 따라 주소를 조합한다.
        // 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
        var fullAddr = data.address; // 최종 주소 변수
        var extraAddr = ''; // 조합형 주소 변수
        
        // 기본 주소가 도로명 타입일때 조합한다.
        if(data.addressType === 'R'){
            //법정동명이 있을 경우 추가한다.
            if(data.bname !== ''){ 
                extraAddr += data.bname; 
            }
            // 건물명이 있을 경우 추가한다.
            if(data.buildingName !== ''){ 
                extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName); 
            }
            // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다.
            fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : ''); 
        }

        // 주소 정보를 해당 필드에 넣는다.
        document.getElementById("sample5_address").value = fullAddr;
        // 주소로 상세 정보를 검색
        geocoder.addressSearch(data.address, function(results, status) {
                // 정상적으로 검색이 완료됐으면
                if (status === daum.maps.services.Status.OK) { var result = results[0];
                //첫번째 결과의 값을 활용
                // 해당 주소에 대한 좌표를 받아서
                var coords = new daum.maps.LatLng(result.y, result.x);
                // 지도를 보여준다.
                mapContainer.style.display = "block"; map.relayout();
                // 지도 중심을 변경한다.
                map.setCenter(coords);
                // 마커를 결과값으로 받은 위치로 옮긴다.
                marker.setPosition(coords) } }); 
        } }).open();    
    }
</script>​


    
</body>
</html>